# Vertex AI Search Application (Similar to Vertex AI Search Widget)

This project consists of a frontend React application and a backend Python Flask application that work together to provide a search interface.

## Purpose of this Code

The standard widget provided by Vertex AI Search offers authentication via OAuth or by disabling security for public access. However, scenarios exist where it's necessary to use the widget while maintaining document security through IAM authorization, but granting individual IAM permissions to all widget users is not feasible.

This sample code demonstrates an alternative approach:
- The backend application uses a **Service Account** to call the Vertex AI Search API. This Service Account has the necessary IAM permissions to access the search data.
- When search results (documents) are retrieved, the backend generates **signed URLs** for these documents.
- End-users can then access the documents securely via these signed URLs without needing individual IAM accounts or permissions on Google Cloud.

This method allows users to utilize Vertex AI Search capabilities and access secured documents without direct IAM user registration, while still upholding document security.

## Project Structure

-   `search-app/`: Contains the frontend React application.
-   `search-app-backend/`: Contains the backend Python Flask API.

## Frontend (`search-app`)

### Purpose

The frontend is a React single-page application (SPA) that provides the user interface for:
-   Entering search queries.
-   Displaying search results from documents.
-   Displaying streaming answers generated by the backend.
-   Handling citations and document previews.

## video 1
<video src="https://raw.githubusercontent.com/mee-nam-lee/vertex-ai-search-web-ui/refs/heads/main/vais_ui.mp4" controls width="720"></video> 


## video 2
<video src="https://github.com/mee-nam-lee/vertex-ai-search-web-ui/raw/refs/heads/main/vais_ui.mp4" controls width="720"></video> 


It communicates with the backend API to fetch search results and answers.

### How to Start

1.  **Navigate to the frontend directory:**
    ```bash
    cd search-app
    ```

2.  **Install dependencies** (if you haven't already):
    Make sure you have Node.js and npm installed.
    ```bash
    npm install
    ```

3.  **Start the development server:**
    ```bash
    npm start
    ```
    This will typically open the application in your default web browser at `http://localhost:3000`.

## Backend (`search-app-backend`)

### Purpose

The backend is a Python Flask application that serves as an API for the frontend. Its main responsibilities include:
-   Providing an endpoint (`/api/search`) to search through documents based on a query.
-   Providing an endpoint (`/api/answer`) to generate a streaming answer based on a query, likely using information from the search results.
-   Providing an endpoint (`/api/generate-signed-url`) to generate signed URLs for accessing documents stored in Google Cloud Storage (GCS).

It handles the core logic of searching and answer generation.

### How to Start

1.  **Navigate to the backend directory:**
    ```bash
    cd search-app-backend
    ```

2.  **Set up a Python virtual environment** (recommended):
    ```bash
    python3 -m venv venv
    source venv/bin/activate  # On Windows, use `venv\Scripts\activate`
    ```

3.  **Install dependencies** (if you haven't already):
    ```bash
    pip install -r requirements.txt
    ```
    The `requirements.txt` file lists necessary Python packages (e.g., Flask, Google Cloud libraries).

4.  **Configure environment variables** (if necessary):
    The backend might require environment variables (e.g., for GCS credentials or API keys). Check for a `.env.example` file or specific instructions. Typically, you would create a `.env` file in the `search-app-backend` directory. For example:
    ```
    FLASK_APP=app.py
    FLASK_ENV=development
    # Add other necessary variables like GOOGLE_APPLICATION_CREDENTIALS if needed
    ```

5.  **Start the Flask development server:**
    The backend is configured to run on `http://localhost:5001`.
    ```bash
    flask run --port 5001
    ```
    Alternatively, if `FLASK_APP` is set in `.env` or exported, you might just run:
    ```bash
    flask run
    ```
    Or, you might run the `app.py` script directly if it's configured to start the server:
    ```bash
    python app.py
    ```

## Running Both Frontend and Backend

For the full application to work, both the frontend and backend servers need to be running simultaneously. The frontend (usually on `localhost:3000`) will make API calls to the backend (usually on `localhost:5001`).

---

## Disclaimer

This is sample code provided for demonstration and illustrative purposes only. The authors and contributors of this code assume no responsibility or liability for any issues, errors, or damages arising from the use or misuse of this software. Use at your own risk.
